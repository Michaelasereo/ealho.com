module.exports=[27167,a=>{"use strict";var b=a.i(28109),c=a.i(85007),d=a.i(82138),e=a.i(90470),f=a.i(92373),g=a.i(15715),h=a.i(34568),i=a.i(41164),j=a.i(31960),k=a.i(87804),l=a.i(11842),m=a.i(47417),n=a.i(92177),o=a.i(56775),p=a.i(85109),q=a.i(24929),r=a.i(35645),s=a.i(89973),t=a.i(11672),u=a.i(34006),v=a.i(58467),w=a.i(94675);process.env.SUPABASE_SERVICE_ROLE_KEY;let x=null;function y(){if(x)return x;try{x=(0,w.createComponentClient)()}catch(a){x=(0,w.createComponentClient)()}return x}let z={get auth(){return y().auth},get from(){return y().from},get storage(){return y().storage},get functions(){return y().functions},get realtime(){return y().realtime}};var A=a.i(36171),B=a.i(35671);function C(){let a=(0,d.useSearchParams)(),w=(0,d.useRouter)(),x="true"===a.get("prefill"),y="true"===a.get("reschedule"),C=a.get("dietitianId")||a.get("therapistId"),D=a.get("eventTypeId"),E=a.get("requestId"),F=a.get("message"),G=x&&C||y?4:1,[H,I]=(0,c.useState)(G),[J,K]=(0,c.useState)({name:"",email:"",gender:"",phone:"",city:"",state:"",age:"",occupation:"",medicalCondition:"",monthlyFoodBudget:"",complaint:""}),[L,M]=(0,c.useState)({whatBringsYou:"",specialPreferences:"",therapistGenderPreference:"random",howDidYouHear:"",therapyType:""}),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(""),V=[{id:"individual-therapy-mini",title:"Individual Therapy Mini",slug:"individual-therapy-mini",description:"45-minute individual therapy session for personalized mental health support",length:45,price:15e3,currency:"NGN"},{id:"student-therapy",title:"Student Therapy",slug:"student-therapy",description:"Affordable therapy session designed for students",length:45,price:1e4,currency:"NGN"},{id:"individual-therapy-max",title:"Individual Therapy Max",slug:"individual-therapy-max",description:"Extended 90-minute individual therapy session for comprehensive mental health support",length:90,price:5e4,currency:"NGN"}],[W,X]=(0,c.useState)(V),[Y,Z]=(0,c.useState)(!1);(0,c.useEffect)(()=>{!aM&&V.length>0&&(aL(V),aN(V[0].id),az(V[0].price))},[]);let[$,_]=(0,c.useState)(C||""),[aa,ab]=(0,c.useState)(null),[ac,ad]=(0,c.useState)(null),[ae,af]=(0,c.useState)(!1),[ag,ah]=(0,c.useState)(new Map),[ai,aj]=(0,c.useState)({}),[ak,al]=(0,c.useState)((0,A.default)()),[am,an]=(0,c.useState)(null),[ao,ap]=(0,c.useState)(""),[aq,ar]=(0,c.useState)(null),[as,at]=(0,c.useState)(!1),[au,av]=(0,c.useState)(!1),[aw,ax]=(0,c.useState)(null),[ay,az]=(0,c.useState)(15e3),[aA,aB]=(0,c.useState)(""),[aC,aD]=(0,c.useState)(""),[aE,aF]=(0,c.useState)(""),[aG,aH]=(0,c.useState)([]),[aI,aJ]=(0,c.useState)(!0),[aK,aL]=(0,c.useState)([]),[aM,aN]=(0,c.useState)(D||""),[aO,aP]=(0,c.useState)([]),[aQ,aR]=(0,c.useState)(!1),[aS,aT]=(0,c.useState)(!1),[aU,aV]=(0,c.useState)(!1),[aW,aX]=(0,c.useState)(null),[aY,aZ]=(0,c.useState)(()=>[]),a$=W.find(a=>a.id===aM)||aK.find(a=>a.id===aM),a_=a$?.length||45,{data:a0,isLoading:a1}=function({dietitianId:a,eventTypeId:b,startDate:d,endDate:e,durationMinutes:f=30,initialData:g,enabled:h=!0}){let[i,j]=(0,c.useState)(g),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),o=(0,c.useMemo)(()=>d?d.toISOString().split("T")[0]:void 0,[d]),p=(0,c.useMemo)(()=>e?e.toISOString().split("T")[0]:void 0,[e]),q=(0,c.useRef)(null),r=(0,c.useRef)(0),s=(0,c.useRef)(0),t=(0,c.useRef)(!0);(0,c.useRef)("");let u=(0,c.useRef)(void 0),v=(0,c.useRef)(void 0),w=(0,c.useCallback)(()=>{let a=3e4*Math.pow(2,Math.min(s.current,5)),b=.3*Math.random()*a;return Math.min(a+b,3e5)},[]),x=(0,c.useCallback)(async(c=!1)=>{if(!h||!a||!o||!p)return;let d=Date.now();if(!(d-r.current<1e4)||c){l(!0);try{let c=new URLSearchParams({dietitianId:a,startDate:o,endDate:p,duration:f.toString()});b&&c.append("eventTypeId",b);let e=await fetch(`/api/availability/timeslots?${c.toString()}`,{credentials:"include",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!e.ok)throw Error(`HTTP ${e.status}`);let g=await e.json();j(g),n(null),s.current=0,r.current=d}catch(a){s.current++,n(a instanceof Error?a.message:"Fetch failed")}finally{l(!1)}}},[a,b,o,p,f,h]);return(0,c.useEffect)(()=>{let a=()=>{let a=!t.current;t.current=!document.hidden,!document.hidden&&a&&Date.now()-r.current>12e4&&u.current?.(!0)};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)}},[]),(0,c.useEffect)(()=>{u.current=x,v.current=w},[x,w]),(0,c.useEffect)(()=>{},[a,b]),(0,c.useEffect)(()=>{if(!h||!a||!o||!p)return;let b=()=>{t.current?(u.current?.(),q.current&&clearTimeout(q.current),q.current=setTimeout(b,v.current?.()||3e4)):(q.current&&clearTimeout(q.current),q.current=setTimeout(b,3e4))};return u.current?.(),q.current=setTimeout(b,v.current?.()||3e4),()=>{q.current&&clearTimeout(q.current)}},[a,b,o,p,h]),{data:i,isLoading:k,error:m,refetch:x}}({dietitianId:$||"",eventTypeId:aM||void 0,startDate:am?new Date(am):void 0,endDate:am?(0,A.default)(am).add(1,"day").toDate():void 0,durationMinutes:a_,enabled:!!am&&!!$&&!!aM});(0,c.useEffect)(()=>{a0&&am?(aP((a0.slots||[]).filter(a=>(0,A.default)(a.start).isSame((0,A.default)(am),"day")).map(a=>(0,A.default)(a.start).format("HH:mm"))),aR(!1),$&&aM&&(0,A.default)(am).format("YYYY-MM")):a1&&aR(!0)},[a0,am,a1,$,aM]);let a2=ak.startOf("month"),a3=ak.daysInMonth(),a4=a2.day(),a5=async a=>{an(a)};(0,c.useEffect)(()=>{if($&&aM){let a=async()=>{aT(!0);try{let a=ak.startOf("month").format("YYYY-MM-DD"),b=ak.add(1,"month").endOf("month").format("YYYY-MM-DD"),c=a$?.length||45,d=`/api/availability/timeslots?userId=${$}&userRole=THERAPIST&startDate=${a}&endDate=${b}&duration=${c}&eventTypeId=${aM}`;console.log("ðŸ“… [PRELOAD] Fetching availability for 2 months:",{startDate:a,endDate:b,userId:$,userRole:"THERAPIST",eventTypeId:aM,duration:c});let e=await fetch(d,{credentials:"include"});if(e.ok){let a=await e.json();console.log("âœ… [PRELOAD] Availability data received:",{slotsCount:a.slots?.length||0,timezone:a.timezone});let b=new Set((a.slots||[]).filter(a=>(0,A.default)(a.start).isSame(ak,"month")).map(a=>(0,A.default)(a.start).format("D")));aZ(Array.from(b)),console.log("ðŸ“Š [PRELOAD] Available dates set:",Array.from(b))}else{let a=await e.json().catch(()=>({}));console.error("âŒ [PRELOAD] Fetch failed:",{status:e.status,error:a.error})}}catch(a){console.error("âŒ [PRELOAD] Error fetching available dates:",a)}finally{aT(!1)}};(async()=>{try{ak.format("YYYY-MM"),a()}catch(a){console.error("âŒ [INSTANT] Error in preload:",a)}})()}},[$,aM,a$,ak]),(0,c.useEffect)(()=>{(async()=>{try{aJ(!0);let a=await fetch("/api/therapists",{credentials:"include"});if(a.ok){let b=((await a.json()).therapists||[]).map(a=>({id:a.id,name:a.name,qualification:a.qualification||"Licensed Therapist",profileImage:a.image||void 0,description:a.description||a.bio||"Professional therapist ready to help you achieve your mental health goals."}));if(aH(b),console.log("âœ… Fetched therapists:",b.length),C){let a=b.find(a=>a.id===C);a&&(aB(a.name),_(a.id))}}else{let b=await a.json().catch(()=>({}));console.error("Error fetching therapists:",b)}}catch(a){console.error("Error fetching therapists:",a)}finally{aJ(!1)}})()},[C]),(0,c.useEffect)(()=>{$&&W.length>0&&(async()=>{try{let a=await fetch(`/api/event-types?userId=${$}&userRole=THERAPIST&filter=book-a-call`,{credentials:"include"});if(a.ok){let b=(await a.json()).eventTypes||[];if(X(a=>{let c=a.map(a=>{let c=b.find(b=>b.slug===a.slug);return c?{...a,id:c.id,description:c.description||a.description}:a});if(D){let a=b.find(a=>a.id===D);a?(aN(a.id),a.price&&az(a.price)):console.warn(`Prefill event type ${D} not found in therapist's event types`)}else if(aM&&!(aM&&/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(aM))){let a=c.find(a=>a.slug===aM||a.id===aM);a&&a.id!==aM&&(aN(a.id),a.price&&az(a.price))}return c}),aL(b),D){let a=b.find(a=>a.id===D);a&&a.id!==aM&&(aN(a.id),a.price&&az(a.price))}}}catch(a){console.error("Error fetching real event types:",a)}})()},[$,D]),(0,c.useEffect)(()=>{let a=J.name||N?.name||T||"",b=J.email||N?.email||R||"";aD(a),aF(b),console.log("ðŸ‘¤ [DEBUG] User name/email updated:",{formDataName:J.name,formDataEmail:J.email,userProfileName:N?.name,userProfileEmail:N?.email,sessionName:T,sessionEmail:R,finalName:a,finalEmail:b})},[J.name,J.email,N,T,R]),(0,c.useEffect)(()=>{5===H&&(async()=>{try{let{data:{session:a}}=await z.auth.getSession();if(a?.user?.email){let b=a.user.email;console.log("ðŸ“§ [DEBUG] Force-setting email from authenticated session for order summary:",b),S(a=>a!==b?b:a),aF(a=>a!==b?b:a),K(a=>a.email!==b?{...a,email:b}:a)}else console.warn("âš ï¸ [DEBUG] No email in session for order summary")}catch(a){console.error("Error fetching session email for order summary:",a)}})()},[H]),(0,c.useEffect)(()=>{try{let b=a.get("payment"),c=a.get("reference");if(!b)return;if("success"===b&&c)(async()=>{try{let a=await fetch("/api/payments/verify",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reference:c})});if(a.ok){let b=await a.json(),c=b.payment,d=b.booking;if(d){let a="";aG.length>0&&(a=aG.find(a=>a.id===d.dietitian_id)?.name||"");let b="45m";if(aK.length>0){let a=aK.find(a=>a.id===d.event_type_id);b=`${a?.length||45}m`}let e=(0,A.default)(d.start_time);ar({id:d.id,date:e.toDate(),time:e.format("HH:mm"),therapist:a,duration:b,meetingLink:d.meeting_link||""}),ax({amount:c?.amount||ay,currency:c?.currency||"NGN"}),I(7)}else if(c?.booking_id){let a=await fetch(`/api/bookings/${c.booking_id}`,{credentials:"include"});if(a.ok){let b=(await a.json()).booking;if(!b)return void console.error("Booking not found in response");let d="";aG.length>0&&(d=aG.find(a=>a.id===b.dietitian_id)?.name||"");let e="45m";if(aK.length>0){let a=aK.find(a=>a.id===b.event_type_id);e=`${a?.length||45}m`}let f=(0,A.default)(b.start_time);ar({id:b.id,date:f.toDate(),time:f.format("HH:mm"),therapist:d,duration:e,meetingLink:b.meeting_link||""}),ax({amount:c.amount||ay,currency:c.currency||"NGN"}),I(7)}else console.error("Failed to fetch booking:",await a.text()),ar({id:c.booking_id||"unknown",date:new Date,time:"",therapist:"",duration:"45m",meetingLink:""}),ax({amount:c.amount||ay,currency:c.currency||"NGN"}),I(7)}else console.log("Payment verified but no booking found, showing success with payment data"),ar({id:"pending",date:new Date,time:"",therapist:"",duration:"45m",meetingLink:""}),ax({amount:c?.amount||ay,currency:c?.currency||"NGN"}),I(7)}else console.error("Failed to verify payment:",await a.text())}catch(a){console.error("Error verifying payment:",a)}})();else if("error"===b){let b=a.get("message");console.error("Payment error:",b),setTimeout(()=>{w.replace("/user-dashboard/book-a-call",{scroll:!1})},100)}}catch(a){console.error("Error in payment callback handler:",a)}},[a,w]),(0,c.useEffect)(()=>{(async()=>{try{let{data:{session:a}}=await z.auth.getSession();if(a?.user){let b=a.user.user_metadata?.name||a.user.user_metadata?.full_name||"",c=a.user.email||"";U(b),S(c),console.log("ðŸ‘¤ [DEBUG] Loading user profile:",{sessionName:b,sessionEmail:c,userId:a.user.id});let d=await fetch("/api/user/profile",{credentials:"include"});if(d.ok){let a=await d.json();if(console.log("âœ… [DEBUG] Profile data received:",{hasProfile:!!a.profile,profileName:a.profile?.name,profileEmail:a.profile?.email}),O(a.profile),a.profile){let d=a.profile.name||b||"",e=a.profile.email||c||"";aD(d),aF(e),console.log("ðŸ“ [DEBUG] Setting formData:",{finalName:d,finalEmail:e,source:{name:a.profile.name?"database":b?"session":"empty",email:a.profile.email?"database":c?"session":"empty"}}),K(b=>({...b,name:d,email:e,age:a.profile.age?.toString()||b.age,occupation:a.profile.occupation||b.occupation,medicalCondition:a.profile.medical_condition||b.medicalCondition,monthlyFoodBudget:a.profile.monthly_food_budget?.toString()||b.monthlyFoodBudget,complaint:x&&F?decodeURIComponent(F):a.profile.complaint||b.complaint}))}else console.log("âš ï¸ [DEBUG] No profile data, using session:",{sessionName:b,sessionEmail:c}),aD(b),aF(c),K(a=>({...a,name:b||a.name||"",email:c||a.email||""}))}else{let a=await d.json().catch(()=>({}));console.error("âŒ [DEBUG] Profile fetch failed:",{status:d.status,error:a}),aD(b),aF(c),K(a=>({...a,name:b||a.name||"",email:c||a.email||"",complaint:x&&F?decodeURIComponent(F):a.complaint}))}aL(V),X(V),aM||D||(aN(V[0].id),az(V[0].price))}}catch(a){console.error("Error loading user data:",a)}if(x&&C){let a=!1;if(E)try{let b=await fetch("/api/user/session-requests",{credentials:"include"});if(b.ok){let c=await b.json(),d=c.requests?.find(a=>a.id===E);if(d&&(d.dietitian?.name&&(aB(d.dietitian.name),a=!0),d.eventType&&D)){let a={id:d.eventType.id,title:d.eventType.title,slug:d.eventType.slug||`event-${d.eventType.id.substring(0,8)}`,length:d.duration||45,price:d.price||0,currency:d.currency||"NGN",description:d.eventType.description||""};console.log("ðŸ“‹ [SESSION REQUEST] Loading event type from session request:",a),X(b=>b.find(b=>b.id===a.id)?(console.log("ðŸ“‹ [SESSION REQUEST] Updating existing event type in availableEventTypes:",a.title),b.map(b=>b.id===a.id?a:b)):(console.log("ðŸ“‹ [SESSION REQUEST] Adding event type to availableEventTypes:",a.title),[...b,a])),aL(b=>b.find(b=>b.id===a.id)?b.map(b=>b.id===a.id?{id:a.id,title:a.title,length:a.length,price:a.price,currency:a.currency}:b):[...b,{id:a.id,title:a.title,length:a.length,price:a.price,currency:a.currency}]),console.log("ðŸ“‹ [SESSION REQUEST] Setting selected event type:",a.id,a.title),aN(a.id),az(a.price)}}}catch(a){console.error("Error fetching from session requests:",a)}if(!a&&aG.length>0){let a=aG.find(a=>a.id===C);a&&aB(a.name)}}})()},[x,F,D,y,C,E,aG]);let a6=a=>{let[b,c]=a.split(":"),d=parseInt(b);return`${d%12||12}:${c}${d>=12?"pm":"am"}`},a7=async()=>{if(!aU){console.log("ðŸ”˜ [DEBUG] Proceed to Payment clicked",{isReschedule:y,selectedDate:am,selectedTime:ao,selectedTherapist:$,selectedEventTypeId:aM}),aV(!0);try{if(y)a8();else if(am&&ao&&$&&aM){console.log("âœ… [DEBUG] All required fields present, proceeding with booking...");let a=null,b=null;try{console.log("ðŸ” [DEBUG] Fetching session...");let c=z.auth.getSession(),d=new Promise((a,b)=>setTimeout(()=>b(Error("Session fetch timed out")),1e4)),{data:{session:e},error:f}=await Promise.race([c,d]);if(console.log("ðŸ” [DEBUG] Session result:",{hasSession:!!e,hasEmail:!!e?.user?.email,error:f}),f||!e?.user?.email)return void alert("Please ensure you are logged in to complete payment.");a=e.user.email,b=e.user.user_metadata?.name||e.user.user_metadata?.full_name||e.user.email?.split("@")[0]||"User",console.log("âœ… [DEBUG] Session data extracted:",{finalEmail:a,finalName:b})}catch(a){console.error("âŒ [DEBUG] Error fetching session:",a),alert("Failed to verify authentication. Please try again.");return}if(!a)return void alert("Email is required for payment. Please ensure you are logged in and try again.");try{let c;console.log("ðŸ“ [DEBUG] Creating booking with data:",{dietitianId:$,eventTypeId:aM,startTime:new Date(`${(0,A.default)(am).format("YYYY-MM-DD")}T${ao}`).toISOString(),name:b,email:a});let d=new AbortController,e=setTimeout(()=>d.abort(),15e3);try{c=await fetch("/api/bookings",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},signal:d.signal,body:JSON.stringify({dietitianId:$,eventTypeId:aM||D,startTime:new Date(`${(0,A.default)(am).format("YYYY-MM-DD")}T${ao}`).toISOString(),name:b,email:a,notes:L.whatBringsYou||L.specialPreferences||"",userGender:J.gender||null,userPhone:J.phone||null,userCity:J.city||null,userState:J.state||null,userWhatBringsYou:L.whatBringsYou||null,userSpecialPreferences:L.specialPreferences||null,userTherapistGenderPreference:L.therapistGenderPreference||null,userHowDidYouHear:L.howDidYouHear||null,sessionRequestId:E})}),clearTimeout(e)}catch(a){if(clearTimeout(e),"AbortError"===a.name)throw Error("Request timed out. The server is taking too long to respond. Please check your connection and try again.");if("TypeError"===a.name&&a.message.includes("fetch"))throw Error("Network error. Please check your internet connection and try again.");throw a}if(console.log("ðŸ“¡ [DEBUG] Booking response status:",c.status),c.ok){let a=await c.json();console.log("âœ… [DEBUG] Booking created:",a);let b=a.booking?.id||`booking-${Date.now()}`;ar({id:b,date:am,time:ao,therapist:aG.find(a=>a.id===$)?.name||"",duration:`${(W.find(a=>a.id===aM)||aK.find(a=>a.id===aM))?.length||45}m`,meetingLink:""});let d=W.find(a=>a.id===aM)?.title||aK.find(a=>a.id===aM)?.title||V.find(a=>a.id===aM)?.title||"Therapy Session",e=aG.find(a=>a.id===$)?.name||"Therapist";aX({id:b,description:`${d} with ${e}`}),console.log("ðŸ’³ [DEBUG] Opening PaymentModal for booking:",b),at(!0)}else{let a=await c.json().catch(()=>({}));console.error("âŒ [DEBUG] Failed to create booking:",a);let b=a.error||a.message||(a.details?`${a.error||"Failed to create booking"}: ${a.details}`:null)||`Booking failed with status ${c.status}. Please try again.`;alert(b);return}}catch(b){console.error("âŒ [DEBUG] Error creating booking:",b);let a=b instanceof Error&&b.message?b.message:"Failed to create booking. Please check your connection and try again.";alert(a);return}}else console.warn("âš ï¸ [DEBUG] Missing required fields:",{selectedDate:am,selectedTime:ao,selectedTherapist:$,selectedEventTypeId:aM}),alert("Please select date, time, and therapist before proceeding.")}finally{aV(!1)}console.log("ðŸ [DEBUG] handleCheckoutClick completed")}},a8=async()=>{if(am&&ao&&$&&E)try{if((await fetch(`/api/user/reschedule-booking/${E}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({newDate:am.toISOString(),newTime:ao})})).ok){let a=aG.find(a=>a.id===$);ar({date:am,time:ao,therapist:a?.name||"",duration:"45m",meetingLink:"https://meet.google.com/abc-defg-hij",isReschedule:!0}),I(7)}}catch(a){console.error("Error confirming reschedule:",a)}},a9=async a=>{at(!1),aX(null),ax(a),I(7);try{let a=await fetch("/api/user/profile",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({gender:J.gender||null,phone:J.phone||null,city:J.city||null,state:J.state||null})});a.ok||console.error("Failed to save profile:",await a.text())}catch(a){console.error("Error saving profile:",a)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col lg:flex-row",children:[(0,b.jsx)("div",{className:"lg:hidden",children:(0,b.jsx)(g.UserMobileHeader,{})}),(0,b.jsx)(f.UserDashboardSidebar,{}),(0,b.jsx)("main",{className:"flex-1 bg-[#101010] overflow-y-auto w-full lg:w-auto lg:ml-64 lg:rounded-tl-lg flex items-center justify-center p-4 lg:p-8 pb-20 lg:pb-8 pt-14 lg:pt-8",children:(0,b.jsxs)("div",{className:"w-full max-w-7xl bg-[#171717] border border-[#262626] rounded-lg shadow-xl",children:[H<7&&(0,b.jsx)("div",{className:"border-b border-[#262626] px-4 sm:px-8 py-3 sm:py-4",children:(0,b.jsx)("div",{className:"flex items-center gap-1 sm:gap-2 overflow-x-auto",children:[1,2,3].map(a=>{if(3===a&&x&&C&&!y)return null;let c=H>=4,d=H>=2,e=H>=1;return(0,b.jsxs)("div",{className:"flex items-center flex-shrink-0",children:[(0,b.jsx)("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs sm:text-sm font-medium ${1===a&&e||2===a&&d||3===a&&c?"bg-white text-black":"bg-[#262626] text-[#9ca3af]"}`,children:a}),a<3&&(0,b.jsx)("div",{className:`w-4 sm:w-8 md:w-12 h-0.5 ${1===a&&d||2===a&&c?"bg-white":"bg-[#262626]"}`})]},a)})})}),1===H&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsxs)("div",{className:"w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-[#262626]",children:[(0,b.jsxs)("div",{className:"p-4 md:p-8 space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-4",children:(0,b.jsx)(e.default,{src:"/daiyet logo.svg",alt:"Daiyet",width:100,height:30,className:"h-6 w-auto"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4 relative",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold text-[#f9fafb] leading-tight flex-1 truncate",children:aM&&(W.find(a=>a.id===aM)||aK.find(a=>a.id===aM))?.title||W[0]?.title||"Therapy Session"}),W.length>0&&(0,b.jsxs)("div",{className:"relative event-type-dropdown flex-shrink-0",children:[(0,b.jsx)("button",{type:"button",onClick:()=>Z(!Y),className:"w-8 h-8 rounded-full bg-[#FFF4E0] flex items-center justify-center hover:bg-[#ffe9c2] transition-colors",children:(0,b.jsx)(v.ChevronDown,{className:`h-4 w-4 text-black transition-transform ${Y?"rotate-180":""}`})}),Y&&(0,b.jsx)("div",{className:"absolute top-full left-auto right-0 sm:right-auto sm:left-0 mt-2 bg-[#171717] border border-[#262626] rounded-lg shadow-xl z-50 min-w-[280px] max-w-[calc(100vw-2rem)] sm:max-w-[350px] max-h-[50vh] overflow-y-auto",children:W.map(a=>{let c=aM===a.id;return(0,b.jsxs)("button",{type:"button",onClick:()=>{aN(a.id),az(a.price),Z(!1)},className:`w-full text-left px-4 py-3 text-sm transition-colors ${c?"bg-[#404040] text-[#f9fafb] font-medium":"text-[#f9fafb] hover:bg-[#262626]"}`,children:[(0,b.jsx)("div",{className:"font-medium truncate",children:a.title}),(0,b.jsxs)("div",{className:"text-xs text-[#9ca3af] mt-1",children:[a.length,"m â€¢ â‚¦",a.price.toLocaleString()]})]},a.id)})})]})]}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] leading-relaxed mb-6",children:aM&&W.find(a=>a.id===aM)?.description||W[0]?.description||"Professional therapy session for personalized mental health support"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.Clock,{className:"h-4 w-4 sm:h-5 sm:w-5 text-[#9ca3af]"}),(0,b.jsxs)("span",{className:"text-xs sm:text-sm text-[#f9fafb]",children:[aM&&(W.find(a=>a.id===aM)||aK.find(a=>a.id===aM))?.length||W[0]?.length||45,"m"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Video,{className:"h-4 w-4 sm:h-5 sm:w-5 text-[#9ca3af]"}),(0,b.jsx)("span",{className:"text-xs sm:text-sm text-[#f9fafb]",children:"Google Meet"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.Calendar,{className:"h-4 w-4 sm:h-5 sm:w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,b.jsx)("span",{className:"text-xs sm:text-sm text-[#f9fafb]",children:"Africa/Lagos"}),(0,b.jsx)(o.ChevronRight,{className:"h-3 w-3 sm:h-4 sm:w-4 text-[#9ca3af]"})]})]})]}),(aM||W.length>0)&&(0,b.jsx)("div",{className:"bg-white rounded-lg px-2 py-1 sm:px-3 sm:py-1.5 mt-3 w-fit",children:(0,b.jsx)("span",{className:"text-base sm:text-lg font-semibold text-black",children:0===ay?"Free":`â‚¦${ay.toLocaleString()}`})})]})]}),(0,b.jsx)("div",{className:"p-4 md:p-8",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-white mb-4",children:"Welcome to Therapy by Daiyet!"}),(0,b.jsx)("p",{className:"text-[#9ca3af] leading-relaxed mb-4",children:"We're glad you're taking this step toward prioritizing your wellbeing and appreciate you considering our services."}),(0,b.jsx)("p",{className:"text-[#9ca3af] leading-relaxed",children:"This form helps us understand your therapy needs and match you with an appropriate therapist from our team."})]}),(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb] mb-6",children:"Enter your information"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Name ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(j.Input,{value:J.name,onChange:a=>{K({...J,name:a.target.value}),ai.name&&aj(a=>{let b={...a};return delete b.name,b})},className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ai.name?"border-red-500":""}`,placeholder:"Enter your full name"}),ai.name&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ai.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Email ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(j.Input,{type:"email",value:J.email,onChange:a=>{K({...J,email:a.target.value}),ai.email&&aj(a=>{let b={...a};return delete b.email,b})},className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ai.email?"border-red-500":""}`,placeholder:"Enter your email"}),ai.email&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ai.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Gender ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{value:J.gender,onChange:a=>{K({...J,gender:a.target.value}),ai.gender&&aj(a=>{let b={...a};return delete b.gender,b})},className:`w-full bg-[#0a0a0a] border border-[#262626] text-[#f9fafb] rounded px-3 py-2 pr-8 appearance-none focus:outline-none focus:ring-0 focus:border-[#404040] ${ai.gender?"border-red-500":""}`,children:[(0,b.jsx)("option",{value:"",children:"Select gender"}),(0,b.jsx)("option",{value:"male",children:"Male"}),(0,b.jsx)("option",{value:"female",children:"Female"}),(0,b.jsx)("option",{value:"other",children:"Other"}),(0,b.jsx)("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]}),(0,b.jsx)(v.ChevronDown,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-[#9ca3af] pointer-events-none"})]}),ai.gender&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ai.gender})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Phone Number ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(j.Input,{type:"tel",value:J.phone,onChange:a=>{K({...J,phone:a.target.value}),ai.phone&&aj(a=>{let b={...a};return delete b.phone,b})},className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ai.phone?"border-red-500":""}`,placeholder:"Enter your phone number"}),ai.phone&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ai.phone})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["City ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(j.Input,{value:J.city,onChange:a=>{K({...J,city:a.target.value}),ai.city&&aj(a=>{let b={...a};return delete b.city,b})},className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ai.city?"border-red-500":""}`,placeholder:"Enter your city"}),ai.city&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ai.city})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["State ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{value:J.state,onChange:a=>{K({...J,state:a.target.value}),ai.state&&aj(a=>{let b={...a};return delete b.state,b})},className:`w-full bg-[#0a0a0a] border border-[#262626] text-[#f9fafb] rounded px-3 py-2 pr-8 appearance-none focus:outline-none focus:ring-0 focus:border-[#404040] ${ai.state?"border-red-500":""}`,children:[(0,b.jsx)("option",{value:"",children:"Select state"}),B.NIGERIA_STATES.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsx)(v.ChevronDown,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-[#9ca3af] pointer-events-none"})]}),ai.state&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ai.state})]})]})]}),(0,b.jsx)("div",{className:"flex gap-3 mt-6",children:(0,b.jsx)(i.Button,{onClick:()=>{let a,b=(a={},J.name?.trim()||(a.name="Name is required"),J.email?.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(J.email)||(a.email="Please enter a valid email address"):a.email="Email is required",J.gender||(a.gender="Gender is required"),J.phone?.trim()||(a.phone="Phone number is required"),J.city?.trim()||(a.city="City is required"),J.state||(a.state="State is required"),a);Object.keys(b).length>0?aj(b):(aj({}),I(2))},className:"bg-[#FFF4E0] hover:bg-[#ffe9c2] text-black px-6 py-2",children:"Continue"})})]})})]})}),2===H&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsxs)("div",{className:"w-full max-w-2xl mx-auto",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-white mb-6",children:"Tell Us About Your Therapy Needs"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Please describe what brings you into therapy and what you're hoping to gain ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(k.Textarea,{value:L.whatBringsYou,onChange:a=>{M({...L,whatBringsYou:a.target.value}),ai.whatBringsYou&&aj(a=>{let b={...a};return delete b.whatBringsYou,b})},rows:5,className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ai.whatBringsYou?"border-red-500":""}`,placeholder:"Tell us about your concerns, goals, and what you hope to achieve through therapy..."}),ai.whatBringsYou&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ai.whatBringsYou})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Any special preferences we should be aware of? ",(0,b.jsx)("span",{className:"text-[#6b7280]",children:"(Optional)"})]}),(0,b.jsx)(k.Textarea,{value:L.specialPreferences,onChange:a=>M({...L,specialPreferences:a.target.value}),rows:3,className:"bg-[#0a0a0a] border-[#262626] text-[#f9fafb]",placeholder:"Any accessibility needs, communication preferences, or other considerations..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:"Therapist Gender Preference"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{value:L.therapistGenderPreference,onChange:a=>M({...L,therapistGenderPreference:a.target.value}),className:"w-full bg-[#0a0a0a] border border-[#262626] text-[#f9fafb] rounded px-3 py-2 pr-8 appearance-none focus:outline-none focus:ring-0 focus:border-[#404040]",children:[(0,b.jsx)("option",{value:"random",children:"No preference (Random)"}),(0,b.jsx)("option",{value:"male",children:"Male"}),(0,b.jsx)("option",{value:"female",children:"Female"})]}),(0,b.jsx)(v.ChevronDown,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-[#9ca3af] pointer-events-none"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["How did you hear about Therapy by Daiyet? ",(0,b.jsx)("span",{className:"text-[#6b7280]",children:"(Optional)"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{value:L.howDidYouHear,onChange:a=>M({...L,howDidYouHear:a.target.value}),className:"w-full bg-[#0a0a0a] border border-[#262626] text-[#f9fafb] rounded px-3 py-2 pr-8 appearance-none focus:outline-none focus:ring-0 focus:border-[#404040]",children:[(0,b.jsx)("option",{value:"",children:"Select an option"}),(0,b.jsx)("option",{value:"google",children:"Google Search"}),(0,b.jsx)("option",{value:"social-media",children:"Social Media"}),(0,b.jsx)("option",{value:"friend-family",children:"Friend or Family"}),(0,b.jsx)("option",{value:"referral",children:"Professional Referral"}),(0,b.jsx)("option",{value:"other",children:"Other"})]}),(0,b.jsx)(v.ChevronDown,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-[#9ca3af] pointer-events-none"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Type of Therapy ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)("div",{className:"space-y-2",children:W.map(a=>{let c=L.therapyType===a.id;return(0,b.jsx)("button",{type:"button",onClick:()=>{M({...L,therapyType:a.id}),aN(a.id),az(a.price),ai.therapyType&&aj(a=>{let b={...a};return delete b.therapyType,b})},className:`w-full text-left p-4 rounded-lg border transition-all ${c?"border-white bg-[#262626] ring-1 ring-white/30":"border-[#262626] hover:bg-[#171717]"}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-white mb-1",children:a.title}),(0,b.jsx)("div",{className:"text-xs text-[#9ca3af]",children:a.description}),(0,b.jsxs)("div",{className:"text-xs text-[#9ca3af] mt-1",children:[a.length," minutes â€¢ â‚¦",a.price.toLocaleString()]})]}),c&&(0,b.jsx)("div",{className:"ml-4",children:(0,b.jsx)("div",{className:"w-5 h-5 rounded-full bg-white flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-black"})})})]})},a.id)})}),ai.therapyType&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ai.therapyType})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)(i.Button,{onClick:()=>I(1),variant:"outline",className:"bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Back"}),(0,b.jsx)(i.Button,{onClick:()=>{let a,b=(a={},L.whatBringsYou?.trim()||(a.whatBringsYou="Please describe what brings you into therapy"),L.therapyType||(a.therapyType="Please select a therapy type"),a);Object.keys(b).length>0?aj(b):(aj({}),x&&C?I(4):I(3))},className:"bg-[#FFF4E0] hover:bg-[#ffe9c2] text-black px-6 py-2",children:"Continue"})]})]})}),3===H&&!(x&&C)&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsxs)("div",{className:"w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-[#262626]",children:[(0,b.jsxs)("div",{className:"p-4 md:p-8 space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-4",children:(0,b.jsx)(e.default,{src:"/daiyet logo.svg",alt:"Daiyet",width:100,height:30,className:"h-6 w-auto"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold text-[#f9fafb] mb-4 line-clamp-2",children:aM&&(W.find(a=>a.id===aM)||aK.find(a=>a.id===aM))?.title||W[0]?.title||"Therapy Session"}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] leading-relaxed mb-6",children:aM&&W.find(a=>a.id===aM)?.description||W[0]?.description||"Professional therapy session for personalized mental health support"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(r.Clock,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("span",{className:"text-sm text-[#f9fafb]",children:[aM&&(W.find(a=>a.id===aM)||aK.find(a=>a.id===aM))?.length||W[0]?.length||45,"m"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(s.Video,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsx)("span",{className:"text-sm text-[#f9fafb]",children:"Google Meet"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(q.Calendar,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-[#f9fafb]",children:"Africa/Lagos"}),(0,b.jsx)(o.ChevronRight,{className:"h-4 w-4 text-[#9ca3af]"})]})]})]})]}),(0,b.jsx)("div",{className:"p-4 md:p-8",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb] mb-6",children:"Select Therapist"}),aI?null:0===aG.length?(0,b.jsx)("div",{className:"text-center py-8",children:(0,b.jsx)("div",{className:"text-[#9ca3af]",children:"No therapists available"})}):(0,b.jsx)("div",{className:"space-y-4",children:aG.map(a=>{let c=$===a.id,d=x&&y;return(0,b.jsx)("div",{className:`border rounded-lg p-4 transition-all ${d?"opacity-50 cursor-not-allowed border-[#262626] bg-transparent":c?"border-white bg-[#171717] ring-1 ring-white/30 cursor-pointer":"border-[#262626] bg-transparent hover:bg-[#171717] cursor-pointer"}`,onClick:()=>!d&&_(a.id),children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-[#262626]",children:a.profileImage?(0,b.jsx)(e.default,{src:a.profileImage,alt:a.name,width:64,height:64,className:"w-full h-full object-cover grayscale"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white text-lg font-semibold",children:a.name.charAt(0)})})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-[#f9fafb] mb-1",children:a.name}),c&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-white bg-[#2b2b2b] px-2 py-1 rounded-full",children:[(0,b.jsx)(p.Check,{className:"h-3 w-3"}),"Selected"]})]}),(0,b.jsx)("p",{className:"text-xs text-[#9ca3af]",children:a.qualification})]}),(0,b.jsx)(i.Button,{variant:"outline",className:"bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-3 py-1 text-xs flex-shrink-0",onClick:async b=>{b.stopPropagation(),ab(a);let c=ag.get(a.id);if(c)ad(c),af(!1),console.log("âš¡ Using preloaded profile:",c);else{af(!0);try{let b=await fetch(`/api/therapists/by-slug/${encodeURIComponent(a.name.toLowerCase().replace(/\s+/g,"-"))}`,{credentials:"include"});if(b.ok){let c=await b.json(),d={id:c.therapist.id,name:c.therapist.name,email:c.therapist.email,bio:c.therapist.bio,image:c.therapist.image,specialization:c.therapist.specialization,licenseNumber:c.therapist.licenseNumber,experience:c.therapist.experience,location:c.therapist.location,qualifications:c.therapist.qualifications||[],updatedAt:c.therapist.updatedAt};ad(d),ah(b=>{let c=new Map(b);return c.set(a.id,d),c}),console.log("âœ… Loaded and cached full profile:",d)}else{let a=await b.json().catch(()=>({}));console.error("Failed to load full profile:",a)}}catch(a){console.error("Failed to load full profile:",a)}finally{af(!1)}}},children:"View Profile"})]})},a.id)})}),(0,b.jsx)("div",{className:"flex gap-3 mt-6",children:x&&C?null:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Button,{onClick:()=>I(2),variant:"outline",className:"bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Back"}),(0,b.jsx)(i.Button,{onClick:()=>I(4),disabled:!$,className:"bg-white hover:bg-gray-100 text-black px-6 py-2 disabled:opacity-50",children:"Continue"})]})})]})})]})}),3===H&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,b.jsx)("div",{className:"p-4 md:p-8",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("button",{onClick:()=>{let a=(0,A.default)(ak).subtract(1,"month");al(a),$&&aM&&a.format("YYYY-MM")},className:"text-[#D4D4D4] hover:text-[#f9fafb]",children:(0,b.jsx)(n.ChevronLeft,{className:"h-5 w-5"})}),(0,b.jsx)("h3",{className:"text-sm font-medium text-[#f9fafb]",children:ak.format("MMMM YYYY")}),(0,b.jsx)("button",{onClick:()=>{let a=(0,A.default)(ak).add(1,"month");al(a),$&&aM&&a.format("YYYY-MM")},className:"text-[#D4D4D4] hover:text-[#f9fafb]",children:(0,b.jsx)(o.ChevronRight,{className:"h-5 w-5"})})]}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["SUN","MON","TUE","WED","THU","FRI","SAT"].map(a=>(0,b.jsx)("div",{className:"text-xs text-[#9ca3af] text-center py-2",children:a},a))}),aS?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"flex items-center justify-center text-sm text-[#9ca3af]",children:(0,b.jsx)("span",{className:"animate-pulse",children:"Loading availability..."})}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-1",children:Array.from({length:35}).map((a,c)=>(0,b.jsx)("div",{className:"h-10 rounded bg-[#262626] animate-pulse"},`skeleton-${c}`))})]}):(0,b.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:a4}).map((a,c)=>(0,b.jsx)("div",{className:"h-10"},`empty-${c}`)),Array.from({length:a3}).map((a,c)=>{let d,e=c+1,f=(d=ak.date(e).format("D"),aY.includes(d)),g=!!am&&(0,A.default)(am).isSame(ak.date(e),"day"),h=(0,A.default)().isSame(ak.date(e),"day");return(0,b.jsx)("button",{onClick:()=>{let a;an(a=ak.date(e).toDate()),ap(""),$&&aM&&(0,A.default)(a).format("YYYY-MM"),$&&a5(a)},className:`h-10 rounded text-sm transition-colors ${g?"bg-white text-black font-medium":f?"bg-[#262626] text-[#f9fafb] hover:bg-[#404040]":"text-[#9ca3af] opacity-50 cursor-not-allowed"} ${h&&!g?"ring-1 ring-[#404040]":""}`,disabled:!f,children:e},e)})]}),(0,b.jsx)("div",{className:"mt-4 text-center",children:(0,b.jsx)("span",{className:"text-xs text-[#9ca3af]",children:"Cal.com"})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-6",children:[(0,b.jsx)(i.Button,{onClick:()=>{x&&C?I(2):I(3)},variant:"outline",className:"w-full sm:w-auto bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Back"}),(0,b.jsx)(i.Button,{onClick:()=>I(4),disabled:!am,className:"w-full sm:w-auto bg-white hover:bg-gray-100 text-black px-6 py-2 disabled:opacity-50",children:"Continue"})]})]})})})}),4===H&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,b.jsxs)("div",{className:"p-4 md:p-8",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb] mb-2",children:"Select Time"}),am&&(0,b.jsx)("p",{className:"text-sm text-[#9ca3af]",children:(0,A.default)(am).format("dddd, MMMM D, YYYY")})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2 mb-4",children:[(0,b.jsx)("button",{className:"text-xs px-3 py-1.5 bg-white text-black rounded font-medium",children:"12h"}),(0,b.jsx)("button",{className:"text-xs px-3 py-1.5 bg-transparent text-[#9ca3af] rounded border border-[#262626]",children:"24h"})]}),(0,b.jsx)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto mb-6",children:aQ?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"flex items-center justify-center text-sm text-[#9ca3af]",children:(0,b.jsx)("span",{className:"animate-pulse",children:"Loading time slots..."})}),(0,b.jsx)("div",{className:"space-y-2",children:Array.from({length:6}).map((a,c)=>(0,b.jsx)("div",{className:"w-full h-12 rounded bg-[#262626] animate-pulse"},`timeslot-skeleton-${c}`))})]}):0===aO.length?(0,b.jsx)("div",{className:"text-center py-8 text-sm text-[#9ca3af]",children:"No available times for this date"}):aO.map(a=>{let c=ao===a;return(0,b.jsxs)("button",{onClick:()=>{ap(a)},className:`w-full h-12 rounded text-sm flex items-center gap-2 px-4 transition-colors ${c?"bg-white text-black font-medium":"bg-transparent border border-[#262626] text-[#f9fafb] hover:bg-[#171717]"}`,children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${c?"bg-black":"bg-green-500"}`}),a6(a)]},a)})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsx)(i.Button,{onClick:()=>I(3),variant:"outline",className:"w-full sm:w-auto bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Back"}),(0,b.jsx)(i.Button,{onClick:()=>I(5),disabled:!ao,className:"w-full sm:w-auto bg-white hover:bg-gray-100 text-black px-6 py-2 disabled:opacity-50",children:"Continue"})]})]})})}),5===H&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsx)("div",{className:"w-full max-w-2xl",children:(0,b.jsxs)("div",{className:"p-4 md:p-8",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb] mb-6",children:"Order Summary"}),(0,b.jsxs)("div",{className:"border border-[#262626] rounded-lg p-6 space-y-3 mb-6",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Name"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:T||J.name||"Loading..."})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Email"}),(0,b.jsx)("span",{className:"text-[#f9fafb] truncate max-w-[200px]",children:R||J.email||"Loading..."})]}),(0,b.jsx)("div",{className:"border-t border-[#262626] pt-3 mt-3"}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Therapist"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:aA||aG.find(a=>a.id===$)?.name||"Not selected"})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Date"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:am?(0,A.default)(am).format("MMM D, YYYY"):""})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Time"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:a6(ao)})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm gap-2",children:[(0,b.jsx)("span",{className:"text-[#9ca3af] flex-shrink-0",children:"Service Type"}),(0,b.jsx)("span",{className:"text-[#f9fafb] truncate text-right",children:W.find(a=>a.id===aM)?.title||aK.find(a=>a.id===aM)?.title||V.find(a=>a.id===aM)?.title||"Therapy Session"})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Duration"}),(0,b.jsxs)("span",{className:"text-[#f9fafb]",children:[W.find(a=>a.id===aM)?.length||aK.find(a=>a.id===aM)?.length||V.find(a=>a.id===aM)?.length||45," minutes"]})]}),(0,b.jsx)("div",{className:"border-t border-[#262626] pt-3 mt-3",children:(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-[#f9fafb]",children:"Total"}),(0,b.jsxs)("span",{className:"text-lg font-semibold text-[#f9fafb]",children:["â‚¦",ay.toLocaleString()]})]})})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsx)(i.Button,{onClick:()=>I(4),variant:"outline",className:"w-full sm:w-auto bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Back"}),(0,b.jsx)(i.Button,{onClick:a7,disabled:aU,className:"w-full sm:w-auto bg-white hover:bg-gray-100 text-black px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:aU?"Processing...":y?"Confirm Reschedule":"Proceed to Payment"})]})]})})}),7===H&&aq&&(0,b.jsxs)("div",{className:"p-8 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(p.Check,{className:"h-8 w-8 text-white"})}),(0,b.jsx)("h2",{className:"text-2xl font-semibold text-[#f9fafb] mb-2",children:"Booking Confirmed!"}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] mb-6",children:"Your booking has been confirmed"}),(0,b.jsxs)("div",{className:"border border-[#262626] rounded-lg p-6 space-y-4 text-left max-w-md mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(q.Calendar,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-[#9ca3af]",children:"Date"}),(0,b.jsx)("div",{className:"text-sm text-[#f9fafb]",children:(0,A.default)(aq.date).format("MMM D, YYYY")})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(r.Clock,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-[#9ca3af]",children:"Time"}),(0,b.jsx)("div",{className:"text-sm text-[#f9fafb]",children:a6(aq.time)})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(r.Clock,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-[#9ca3af]",children:"Duration"}),(0,b.jsx)("div",{className:"text-sm text-[#f9fafb]",children:aq.duration})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(s.Video,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-[#9ca3af]",children:"Meeting Link"}),(0,b.jsxs)("a",{href:aq.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-400 hover:underline flex items-center gap-1",children:[aq.meetingLink,(0,b.jsx)(t.ExternalLink,{className:"h-3 w-3"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3 mt-6 max-w-md mx-auto",children:[(0,b.jsx)(i.Button,{onClick:()=>window.open(aq.meetingLink,"_blank"),className:"w-full bg-white hover:bg-gray-100 text-black px-6 py-2",children:"Join Meeting"}),(0,b.jsx)("div",{className:"text-sm text-[#9ca3af] mb-2",children:"Add to Calendar"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",className:"flex-1 bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-4 py-2 text-xs",children:"Google Calendar"}),(0,b.jsx)(i.Button,{variant:"outline",className:"flex-1 bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-4 py-2 text-xs",children:"Outlook"}),(0,b.jsx)(i.Button,{variant:"outline",className:"flex-1 bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-4 py-2 text-xs",children:"iCal"})]}),(0,b.jsx)(i.Button,{onClick:()=>w.push("/user-dashboard/upcoming-meetings"),variant:"outline",className:"w-full bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"View Upcoming Meetings"}),(0,b.jsx)(i.Button,{onClick:()=>{I(1),an(null),ap(""),_(""),ar(null)},variant:"outline",className:"w-full bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Book Another Session"})]})]})]})}),!y&&aW&&(0,b.jsx)(l.PaymentModal,{isOpen:as,onClose:()=>{at(!1),aX(null),I(5)},onSuccess:a9,amount:ay,currency:"NGN",description:aW.description,requestType:"CONSULTATION",requestId:E||void 0,bookingId:aW.id,userEmail:J.email||N?.email||R||"",userName:J.name||N?.name||T||""}),(0,b.jsx)(m.PaymentSuccessModal,{isOpen:au,onClose:()=>{av(!1),w.push("/user-dashboard/upcoming-meetings")},requestType:"CONSULTATION",amount:aw?.amount||ay||15e3,currency:aw?.currency||"NGN",bookingDetails:aq,onViewDetails:()=>{av(!1),w.push("/user-dashboard/upcoming-meetings")}}),aa&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"bg-[#171717] border border-[#262626] rounded-lg w-full max-w-2xl p-6 shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb]",children:"Therapist Profile"}),(0,b.jsx)("button",{onClick:()=>ab(null),className:"text-[#D4D4D4] hover:text-[#f9fafb] transition-colors",children:(0,b.jsx)(u.X,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-[#262626]",children:aa.profileImage?(0,b.jsx)(e.default,{src:aa.profileImage,alt:aa.name,width:128,height:128,className:"w-full h-full object-cover grayscale"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white text-3xl font-semibold",children:aa.name.charAt(0)})})})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-[#f9fafb] mb-2",children:aa.name}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af]",children:aa.qualification})]}),(0,b.jsxs)("div",{className:"border-t border-[#262626] pt-6",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-[#D4D4D4] mb-3",children:"Professional Summary"}),ae?(0,b.jsx)("p",{className:"text-sm text-[#9ca3af]",children:"Loading..."}):(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] leading-relaxed whitespace-pre-line",children:ac?.bio||aa.description||"No professional summary available."}),ac?.updatedAt&&!ae&&(0,b.jsxs)("div",{className:"text-xs text-[#9ca3af] pt-3 mt-3 border-t border-[#262626]",children:["Profile updated: ",new Date(ac.updatedAt).toLocaleString()]})]}),(0,b.jsx)("div",{className:"flex justify-end pt-4 border-t border-[#262626]",children:(0,b.jsx)(i.Button,{onClick:()=>ab(null),className:"bg-white hover:bg-gray-100 text-black px-6 py-2",children:"Close"})})]})]})}),(0,b.jsx)("div",{className:"lg:hidden",children:(0,b.jsx)(h.UserBottomNavigation,{})})]})}function D(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-white",children:"Loading booking page..."})}),children:(0,b.jsx)(C,{})})}a.s(["default",()=>D],27167)}];

//# sourceMappingURL=Desktop_daiyet-app_app_user-dashboard_book-a-call_page_tsx_7237640d._.js.map